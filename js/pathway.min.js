function ready(t,e,s,l){pathwayW=parseInt(d3.select(".container").style("width")),graph={nodes:[],links:[]},e.forEach(function(t){graph.nodes.push({id:t.source_id,name:t.source,level:t.level}),graph.links.push({source:t.source,source_id:t.source_id,target:t.target,target_id:t.target_id,value:t.value})});var a=d3.nest().key(function(t){return t.name}),r=a.entries(graph.nodes);graph.nodes=r.map(function(t){return t.values[0]}),graph.links.forEach(function(t,e){graph.links[e].source=graph.nodes.map(function(t,s){return t.name==graph.links[e].source?s:void 0}).filter(isFinite)[0],graph.links[e].target=graph.nodes.map(function(t,s){return t.name==graph.links[e].target?s:void 0}).filter(isFinite)[0]}),graph.nodes.forEach(function(t,e){graph.nodes[e]={id:t.id,name:t.name,level:t.level}});for(var n,i=0;i<levels.length;i++){n=graph.nodes.filter(function(t){return t.level==levels[i]});for(var o=0;o<n.length;o++)n[o].levelIndex=o,n[o].levelLength=n.length}jobsDataset=d3.nest().key(function(t){return t.id}).entries(s),catsData=d3.nest().key(function(t){return t.id}).key(function(t){return t.nice_areas}).key(function(t){return t.nice_subcategories}).entries(l),draw(),drawCircleChart("average_salary",".no1"),drawCircleChart("job_openings","#no2"),drawStackedBar(),fillList("commonJobsList","e1","common_job_titles"),fillList("topCertificationsList","e1","top_certifications"),fillList("topSkillsList","e1","top_skills"),d3.selectAll(".educationChart").style("display","inherit"),updateStackedBar("e1"),fillAreas("e1"),new ShareButton({networks:{email:{enabled:!1}}}),setBoxHeight();var d=document.getElementById("r1"),c=document.getElementById("c2"),u=document.getElementById("c4"),y=document.getElementById("c3");1e3>pathwayW&&pathwayW>575?d.insertBefore(u,c):575>=pathwayW&&(d.insertBefore(u,c),d.insertBefore(y,c)),d3.select(window).on("resize",function(){pathwayW=parseInt(d3.select(".container").style("width")),1e3>pathwayW&&d.insertBefore(u,c)}),$(".table").css("display","none"),d3.selectAll(".infIcon").on("click",function(){d3.select("#b"+d3.select(this).attr("rel")).style("display","inherit")}),d3.selectAll(".closeBtn").on("click",function(){d3.select("#b"+d3.select(this).attr("rel")).style("display","none")})}function draw(){nodes=graph.nodes,links=graph.links;var t,e,s=(d3.select(".pathway").append("div").attr("class","tooltip"),d3.select(".pathway").node().getBoundingClientRect()),l={top:30,right:.1*s.width,bottom:15,left:.1*s.width},a=s.width-l.left-l.right;pathwayW>550?l.left=l.left:l.left=20,pathwayW>550?l.right=l.right:l.right=50,t=pathwayW>550?.6*s.width-l.top-l.bottom:1.1*s.width-l.top-l.bottom,e=pathwayW>685?.11*t:15,console.log(e);for(var r=d3.scale.ordinal().domain(levels).rangeRoundPoints([40,a]),n=(d3.scale.sqrt().domain(d3.extent(jobsDataset.map(function(t){return+t.values[0].job_openings}))).range([t/10,t/7]),0);n<nodes.length;n++)nodes[n].fixed=!0,nodes[n].x=r(nodes[n].level),nodes[n].y=nodes[n].levelIndex*(t/nodes[n].levelLength)+t/2/nodes[n].levelLength;var i=d3.svg.diagonal().projection(function(t){return[t.y,t.x]}),o=d3.select(".pathway").append("svg").attr("width",a+l.left+l.right).attr("height",t+l.top+l.bottom);o.append("rect").attr("width",a+l.left+l.right).attr("height",t+l.top+l.bottom).attr("class","backGrndClick").style("z-index",-100).style("fill","#fff").on("click",unclick);var d=o.append("g").attr("transform","translate("+l.left+","+l.top+")").selectAll(".levLines").data(levels),c=d.enter().append("g");c.append("line").attr("x1",function(t){return r(t)}).attr("y1",0).attr("x2",function(t){return r(t)}).attr("y2",t).style("stroke","#eaeaea"),c.append("text").attr("class","levLab").attr("x",function(t){return r(t)}).attr("y",-5).attr("text-anchor","middle").text(function(t){return t}),o.append("defs").append("marker").attr("id","marker").attr("class","mark").attr("viewBox","0 -5 10 10").attr("refX",10).attr("refY",0).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("fill","#546e7a").attr("d","M0,-5L10,0L0,5");var u=d3.selectAll(".levLab"),y=u[0][0].getBBox(),p=u[0][1].getBBox(),h=u[0][2].getBBox(),f=.03*a,g=y.x+y.width,v=p.x,k=p.x+p.width,m=h.x,x=o.append("g").attr("transform","translate("+l.left+","+l.top+")");x.append("line").attr("x1",g+f).attr("y1",y.y+9).attr("x2",v-f).attr("y2",y.y+9).style("stroke","#eaeaea").attr("marker-end","url(#marker)"),x.append("line").attr("x1",k+f).attr("y1",y.y+9).attr("x2",m-f).attr("y2",y.y+9).style("stroke","#eaeaea").attr("marker-end","url(#marker)");var b=o.append("g").attr("transform","translate("+l.left+","+l.top+")").selectAll("path").data(links);b.enter().append("path").attr("class","link backLink").attr("d",function(t){if(t.source_id.charAt(0)==t.target_id.charAt(0)){var s=(jobsDataset.filter(function(e){return e.key==t.source_id}),jobsDataset.filter(function(e){return e.key==t.target_id}),2*Math.PI*e*.25-8),l=2*Math.PI*e*.25-8,a=nodes[t.target].x-nodes[t.source].x,r=nodes[t.target].y-nodes[t.source].y,n=Math.sqrt(.4*(a*a+r*r));return nodes[t.source].y>nodes[t.target].y?"M"+(nodes[t.source].x-l/2)+","+(nodes[t.source].y-l/2)+"A"+n+","+n+" 0 0,1 "+(nodes[t.target].x-s/2)+","+(nodes[t.target].y+s/2):"M"+(nodes[t.source].x+l/2)+","+(nodes[t.source].y+l/2)+"A"+n+","+n+" 0 0,1 "+(nodes[t.target].x+s/2)+","+(nodes[t.target].y-s/2)}var o=(jobsDataset.filter(function(e){return e.key==t.source_id}),jobsDataset.filter(function(e){return e.key==t.target_id}),{x:nodes[t.source].y,y:nodes[t.source].x+e}),d={x:nodes[t.target].y,y:nodes[t.target].x-e};return i({source:o,target:d})}).style("display","none");var w=(b.enter().append("path").attr("class","link frontLink").attr("marker-end","url(#marker)").attr("d",function(t){if(t.source_id.charAt(0)==t.target_id.charAt(0)){var s=(jobsDataset.filter(function(e){return e.key==t.source_id}),jobsDataset.filter(function(e){return e.key==t.target_id}),2*Math.PI*e*.25-8),l=2*Math.PI*e*.25-8,a=nodes[t.target].x-nodes[t.source].x,r=nodes[t.target].y-nodes[t.source].y,n=Math.sqrt(.4*(a*a+r*r));return nodes[t.source].y>nodes[t.target].y?"M"+(nodes[t.source].x-l/2)+","+(nodes[t.source].y-l/2)+"A"+n+","+n+" 0 0,1 "+(nodes[t.target].x-s/2)+","+(nodes[t.target].y+s/2):"M"+(nodes[t.source].x+l/2)+","+(nodes[t.source].y+l/2)+"A"+n+","+n+" 0 0,1 "+(nodes[t.target].x+s/2)+","+(nodes[t.target].y-s/2)}var o=(jobsDataset.filter(function(e){return e.key==t.source_id}),jobsDataset.filter(function(e){return e.key==t.target_id}),{x:nodes[t.source].y,y:nodes[t.source].x+e}),d={x:nodes[t.target].y,y:nodes[t.target].x-e};return i({source:o,target:d})}).style("display","none"),o.append("g").attr("transform","translate("+l.left+","+l.top+")")),A=w.selectAll("g").data(nodes).enter().append("g").attr("class","circleCont");A.append("circle").attr("class","jobRoles").attr("id",function(t){return t.id}).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",function(){return e}).on("mouseover",function(t){highlightSelection(t,this),showToolTip(t,this)}).on("mouseout",function(){d3.selectAll(".circleCont").select("text").style("opacity",1),d3.selectAll(".jobRoles").style("stroke","#29B6F6").style("stroke-width","2px").style("fill","#f7f8f9"),d3.selectAll(".link").style("display","none"),d3.select(".tooltip").style("display","none")}).on("click",function(t,e){1==clicked&&t.id==clickedId?unclick():clickHandler(t,e,this),setBoxHeight()});A.append("text").attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("dy",".35em").attr("text-anchor","middle").text(function(t){return t.name}).call(wrap,80);d3.select(".pathway").selectAll("tspan").attr("y",function(t){var e=d3.select(this.parentNode).selectAll("tspan");return 1==e[0].length?pathwayW>685?t.y:t.y+25:2==e[0].length?pathwayW>685?t.y-5:t.y+25:3==e[0].length?pathwayW>685?t.y-13:t.y+25:t.y-18})}function clickHandler(t,e,s){$(".table").css("opacity",1),$(".table").slideDown("fast"),d3.select(".job").html(t.name),d3.selectAll(".link").style("display","none");var l=jobsDataset.filter(function(e){return e.key==t.id});d3.select(".salaryNum").html("$"+formatThousand(l[0].values[0].average_salary)),d3.selectAll(".circ").style("opacity",.5).style("stroke-width","0px"),d3.selectAll(".jobTitle").style("display","none"),d3.selectAll(".number").style("display","none"),d3.select("#average_salarySvg").selectAll("rect").style("display","none"),d3.select("#job_openingsSvg").selectAll("rect").style("display","none");var a=d3.select(s).attr("id");d3.select("#average_salarySvg").select("#rect"+a).moveToFront().style("display","inherit"),d3.select("#average_salarySvg").select("#cf"+a).moveToFront().style("fill","#f46d43").style("opacity",1).style("stroke","#455A64").style("stroke-width","2px"),d3.select("#average_salarySvg").select("#tsf"+a).moveToFront().style("display","inherit"),d3.select(".openingsNumber").html(formatThousand(l[0].values[0].job_openings)),d3.select("#job_openingsSvg").select("#rect"+a).moveToFront().style("display","inherit"),d3.select("#job_openingsSvg").select("#cf"+a).moveToFront().style("fill","#74add1").style("opacity",1).style("stroke","#455A64").style("stroke-width","2px"),d3.select("#job_openingsSvg").select("#tsf"+a).moveToFront().style("display","inherit"),highlightSelection(t,s),fillList("commonJobsList",t.id,"common_job_titles"),fillList("topCertificationsList",t.id,"top_certifications"),fillList("topSkillsList",t.id,"top_skills"),d3.selectAll(".educationChart").style("display","inherit"),updateStackedBar(t.id),fillAreas(t.id),d3.selectAll(".jobRoles").on("mouseover",null).on("mouseout",null),clicked=!0,clickedId=t.id,d3.select(".tooltip").style("display","none")}function highlightSelection(t,e){var s=t.id;d3.selectAll(".jobRoles").style("stroke","#d4f0fd").style("stroke-width","2px").style("fill","#f7f8f9"),d3.selectAll(".circleCont").select("text").style("opacity",.2);var l=d3.selectAll(".link").filter(function(t){return nodes[t.source].id==s}),a=d3.selectAll(".link").filter(function(t){return nodes[t.target].id==s}),r=d3.selectAll(".frontLink").filter(function(t){return nodes[t.source].id==s}),n=d3.selectAll(".frontLink").filter(function(t){return nodes[t.target].id==s});l.style("display","inherit"),a.style("display","inherit");for(var i=0;i<r[0].length;i++){var o=d3.select(r[0][i]),d=r[0][i].getTotalLength();o.attr("stroke-dasharray",d+" "+d).attr("stroke-dashoffset",d).transition().duration(250).ease("linear").attr("stroke-dashoffset",0),d3.selectAll(".circleCont").filter(function(t){return t.name==nodes[l[0][i].__data__.target].name}).select("text").style("opacity",1),d3.selectAll(".circleCont").filter(function(t){return t.name==nodes[l[0][i].__data__.target].name}).select("circle").style("stroke","#29B6F6")}for(var i=0;i<n[0].length;i++){var o=d3.select(n[0][i]),d=n[0][i].getTotalLength();o.attr("stroke-dasharray",d+" "+d).attr("stroke-dashoffset",d).transition().duration(250).ease("linear").attr("stroke-dashoffset",0),d3.selectAll(".circleCont").filter(function(t){return t.name==nodes[a[0][i].__data__.source].name}).select("text").style("opacity",1),d3.selectAll(".circleCont").filter(function(t){return t.name==nodes[a[0][i].__data__.source].name}).select("circle").style("stroke","#29B6F6")}d3.select(e.parentNode).select("text").style("opacity",1),d3.select(e).style("stroke","#455a64").style("stroke-width","3px").style("fill","#9addfb")}function unclick(){$(".table").slideUp("fast"),d3.select(".job").html(" "),d3.selectAll(".circleCont").select("text").style("opacity",1),d3.selectAll(".jobRoles").style("stroke","#29B6F6").style("stroke-width","2px").style("fill","#f7f8f9"),d3.selectAll(".link").style("display","none"),d3.selectAll(".circ").style("opacity",.5).style("stroke-width","0px"),d3.selectAll(".jobRoles").on("mouseover",function(t){highlightSelection(t,this),showToolTip(t,this)}).on("mouseout",function(){d3.selectAll(".circleCont").select("text").style("opacity",1),d3.selectAll(".link").style("display","none"),d3.selectAll(".jobRoles").style("stroke","#29B6F6").style("stroke-width","2px").style("fill","#f7f8f9"),d3.select(".tooltip").style("display","none")}),clicked=!1,clickedId=""}function showToolTip(t,e){var s=jobsDataset.filter(function(e){return e.key==t.id}),l="<div class='tipJob'>"+t.name+"</div><div class='var'>Job openings</div><div class='tipValue op'>"+formatThousand(s[0].values[0].job_openings)+"</div><div class='var'>Average salary</div><div class='tipValue sal'>$"+formatThousand(s[0].values[0].average_salary)+"</div><div class='more'>Click the circle for more info</div>";d3.select(".tooltip").html(l).style("display","inherit");var a=d3.select(".tooltip").node().getBoundingClientRect(),r=d3.select(".pathway").node().getBoundingClientRect();d3.select(".tooltip").style("top",t.y+35+ +d3.select(e).attr("r")+"px").style("left",t.x+.1*r.width-a.width/2+"px")}function drawCircleChart(t,e){var s=[];jobsDataset.forEach(function(e){var l={};l.id=e.key,l.title=e.values[0].job_title,l.value=+e.values[0][t],s.push(l)});var l={top:0,right:0,bottom:0,left:0},a=d3.select(e).select(".boxContent").node().getBoundingClientRect().width-(l.left+l.right),r=120,n=15,i=d3.scale.linear().domain(d3.extent(s,function(t){return t.value})).range([20,a-20]),o=d3.select("#"+t+"Chart").append("svg").attr("id",t+"Svg").attr("width",a).attr("height",r);o.append("line").style("stroke","#455A64").attr("x1",0).attr("y1",r/2).attr("x2",a).attr("y2",r/2);var d=(o.selectAll("circles").data(s).enter().append("circle").attr("id",function(t){return"cf"+t.id}).attr("class",t+" circ").attr("cy",r/2).attr("r",n).attr("cx",function(t){return i(t.value)}).on("mouseover",function(e){d3.select(this).moveToFront().style("stroke","#455A64").style("stroke-width","2px").style("opacity",1),d3.select("#"+t+"Svg").select("#rect"+e.id).moveToFront().style("display","inherit"),d3.select("#"+t+"Svg").select("#tf"+e.id).moveToFront().style("display","inherit"),d3.select("#"+t+"Svg").select("#tsf"+e.id).moveToFront().style("display","inherit"),d3.select(d3.select("#"+t+"Svg").select("#tsf"+e.id)[0][0].parentNode).moveToFront(),d3.select("#"+t+"Svg").select("#rect"+clickedId).style("display","none"),d3.select("#"+t+"Svg").select("#tsf"+clickedId).style("display","none")}).on("mouseout",function(e){d3.select(this).moveToBack().style("stroke","none").style("opacity",.5),d3.select("#"+t+"Svg").select("#rect"+e.id).moveToBack().style("display","none"),d3.select("#"+t+"Svg").select("#tf"+e.id).style("display","none"),d3.select("#"+t+"Svg").select("#tsf"+e.id).style("display","none"),d3.select("#"+t+"Svg").select("#cf"+clickedId).moveToFront().style("stroke","#455A64").style("stroke-width","2px").style("opacity",1),d3.select("#"+t+"Svg").select("#rect"+clickedId).moveToFront().style("display","inherit"),d3.select("#"+t+"Svg").select("#tsf"+clickedId).moveToFront().style("display","inherit")}).on("click",function(t,e){var s=d3.select("#"+t.id)[0][0].__data__,l=d3.select("#"+t.id)[0][0];clickHandler(s,e,l),setBoxHeight()}),o.selectAll("nums").data(s).enter().append("g"));d.append("text").text(function(t){return formatThousand(t.value)}).attr("id",function(t){return"tf"+t.id}).attr("class",t+" number").attr("x",function(t){return i(t.value)}).attr("y",r/2+2*n+3).attr("text-anchor",function(){var t=d3.select(this).node().getBBox();return t.x+t.width/2>=a-5?"end":t.x-t.width/2<=10?"start":"middle"}).style("display","none"),d.append("text").text(function(t){return t.title}).attr("id",function(t){return"tsf"+t.id}).attr("class",t+" jobTitle").attr("x",function(t){return i(t.value)}).attr("y",50).attr("dy",".35em").attr("text-anchor","middle").call(wrap,80),d3.select(".salaryNum").html("$0"),d3.select("#"+t+"Chart").selectAll(".jobTitle").each(function(e){var s=d3.select(this).node().getBBox(),l=+d3.select("#"+t+"Svg").select("#cf"+e.id).attr("cy")-+d3.select("#"+t+"Svg").select("#cf"+e.id).attr("r")/2;s.y+s.height>=l-5&&d3.select(this).selectAll("tspan").attr("y",l-(s.height+5)),s.x+s.width/2>=a-35&&d3.select(this).selectAll("tspan").attr("x",a-s.width/2),s.x-s.width/2<=25&&"m3"!=e.id&&d3.select(this).selectAll("tspan").attr("x",10+s.width/2);var r=d3.select(this).node().getBBox();d3.select(this.parentNode).insert("rect",":first-child").attr("id",function(t){return"rect"+t.id}).attr("class","rect_jobTitle").attr("x",r.x-10).attr("y",r.y).attr("width",r.width+20).attr("height",r.height).attr("fill","#fff").style("display","none")}),d3.selectAll(".jobTitle").style("display","none")}function fillList(t,e,s){for(var l=jobsDataset.filter(function(t){return t.key==e}),a=[],r=1;10>r;r++){var n=l[0].values[0][s+"_"+r];void 0!=n&&n.length>2&&a.push(l[0].values[0][s+"_"+r])}document.getElementById(t).innerHTML="",d3.select("#"+t).selectAll("li").data(a).enter().append("li").html(function(t){return t})}function drawStackedBar(){causes=["Sub-BA","Bachelor's Degree","Graduate Degree"],colors=["#6e016b","#8c6bb1","#bfd3e6"],margin={top:20,right:20,bottom:30,left:25},width=d3.select(".no5").select(".boxContent").node().getBoundingClientRect().width-(margin.left+margin.right),height=70,x=d3.scale.linear().rangeRound([2,width]),barSvg=d3.select(".educationChart").append("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).append("g").attr("transform","translate("+margin.left+","+margin.top+")")}function updateStackedBar(t){var e=jobsDataset.filter(function(e){return e.key==t}),s=[+e[0].values[0]["sub-ba"],+e[0].values[0].bachelor,+e[0].values[0].graduate];x.domain([0,100]);var l=[0,x(s[0]),x(s[0])+x(s[1])],a=barSvg.selectAll("rect").data(s);a.enter().append("rect").attr("y",height/1.47).attr("height",barHeight).attr("stroke","#fff").attr("stroke-width",2).attr("fill",function(t,e){return colors[e]});a.transition().duration(500).attr("x",function(t,e){return l[e]}).attr("width",function(t){return x(t)});var r=barSvg.selectAll(".barNum").data(s);r.enter().append("text").attr("class","barNum").attr("y",margin.top+barHeight+16).attr("dy",".35em").attr("text-anchor","end");r.transition().duration(500).attr("x",function(t,e){return t>6?l[e]+x(t)-5:0}).text(function(t){return t}).attr("fill",function(t,e){return t>6&&0==e||1==e?"#fff":"333"});var n=barSvg.selectAll(".causeLabels").data(s);n.enter().append("text").attr("class","causeLabels").attr("y",margin.top).attr("dy",".35em");n.attr("text-anchor",function(t){return 10>t?"middle":"end"}).attr("x",function(t,e){return l[e]+x(t)-5}).text(function(t,e){return causes[e]}).call(wrap,70);var i=d3.select(n[0][0]).node().getBBox(),o=Number(d3.select(n[0][0]).attr("x"))+i.width/2,d=d3.select(n[0][1]).node().getBBox(),c=Number(d3.select(n[0][1]).attr("x"))-d.width/2,u=Number(d3.select(n[0][1]).attr("x"))+d.width/2,y=d3.select(n[0][2]).node().getBBox(),p=Number(d3.select(n[0][2]).attr("x"))-y.width/2;o>=c||u>=p?(d3.select(n[0][1]).selectAll("tspan").attr("y",-5),d3.select(r[0][1]).attr("y",height/3-10)):d3.select(r[0][1]).attr("y",margin.top+barHeight+16)}function fillAreas(t){var e=catsData.filter(function(e){return e.key==t});if(d3.select(".ksas").html(""),d3.select(".tasks").html(""),d3.selectAll(".areaBtns").remove(),d3.selectAll(".subCatsUl").remove(),d3.select(".row2").style("display","none"),null!=e[0]){var s=d3.select(".areas").selectAll("areaBtns").data(e[0].values).enter().append("div").attr("id",function(t,e){return"area"+e}).attr("class","areaBtns accordion").html(function(t){return t.key}).on("click",function(){d3.select(this.nextSibling).classed("show",function(){return 1==d3.select(this).classed("show")?(d3.selectAll(".accordion").classed("active",!1),!1):(d3.selectAll(".subCatsUl").classed("show",!1),d3.selectAll(".accordion").classed("active",!1),d3.select(this.previousSibling).classed("active",!0),!0)}),setBoxHeight()});d3.select(".ksas").append("div").attr("class","noData").html("No data"),d3.select(".tasks").append("div").attr("class","noData").html("No data"),s.each(function(t,e){d3.select(".areas").insert("ul","#area"+(e+1)).attr("class","subCatsUl").selectAll("subCats").data(t.values).enter().append("li").attr("class","subCatsLi").attr("id",function(t){return idStrip(t.key)}).html(function(t){return t.key}).on("click",function(t){d3.select(this).classed("active",function(){return 0==d3.select(this).classed("active")?(d3.select(".row2").style("display","block"),d3.selectAll(".subCatsLi").classed("active",!1),d3.selectAll(".ksa").style("display","none"),d3.selectAll(".task").style("display","none"),d3.select(".ksas").selectAll("."+idStrip(t.key))[0][0].childNodes.length>=0&&(d3.select(".ksas").selectAll("."+idStrip(t.key)).style("display","none"),d3.select(".ksas").select(".noData").style("display","block")),0==d3.select(".tasks").selectAll("."+idStrip(t.key))[0][0].childNodes.length?(d3.select(".tasks").selectAll("."+idStrip(t.key)).style("display","none"),d3.select(".tasks").select(".noData").style("display","block")):(d3.select(".ksas").select(".noData").style("display","none"),d3.select(".tasks").select(".noData").style("display","none"),d3.select(".ksas").selectAll("."+idStrip(t.key)).style("display","block"),d3.select(".tasks").selectAll("."+idStrip(t.key)).style("display","block")),!0):(d3.select(".row2").style("display","none"),d3.selectAll(".ksa").style("display","none"),d3.selectAll(".task").style("display","none"),!1)});var e=document.getElementById("scrollTo"),s=getOffsetTop(e);animatedScrollTo(document.body,s,500)})}),d3.selectAll(".subCatsLi").each(function(t){var e=t;d3.select(".ksas").append("ul").attr("class",function(){return"ksa "+idStrip(e.key)}).style("display","none").selectAll("ksaList").data(t.values).enter().append("li").html(function(t){return t.ksa}),d3.select(".tasks").append("ul").attr("class",function(){return"task "+idStrip(e.key)}).style("display","none").selectAll("taskList").data(t.values).enter().append("li").html(function(t){return t.tasks})}),d3.select(".tasks").selectAll("li").each(function(){""==d3.select(this).html()&&d3.select(this).remove()}),d3.select(".ksas").selectAll("li").each(function(){""==d3.select(this).html()&&d3.select(this).remove()})}}function getOffsetTop(t){var e=0;do isNaN(t.offsetTop)||(e+=t.offsetTop);while(t=t.offsetParent);return e}function setBoxHeight(){var t=document.getElementById("no4").offsetHeight;if(pathwayW>1e3&&pathwayW>575)document.getElementById("no2").style.height=t+"px",document.getElementById("no6").style.height=t+"px";else{if(575>=pathwayW)return;document.getElementById("no6").style.height=t+"px"}}function wrap(t,e){t.each(function(){for(var t,s=d3.select(this),l=s.text().split(/\s+/).reverse(),a=[],r=0,n=1.1,i=s.attr("y"),o=s.attr("x"),d=parseFloat(s.attr("dy")),c=s.text(null).append("tspan").attr("x",o).attr("y",i).attr("dy",d+"em");t=l.pop();)a.push(t),c.text(a.join(" ")),c.node().getComputedTextLength()>e&&(a.pop(),c.text(a.join(" ")),a=[t],c=s.append("tspan").attr("x",o).attr("y",i).attr("dy",++r*n+d+"em").text(t))})}function idStrip(t){var e=t.replace(/\s+/g,""),s=e.replace(/\.+/g,""),l=s.replace(/\'+/g,""),a=l.toLowerCase(),r=a.substring(0,20),n=r.replace(/\,+/g,""),i=n.replace(/\/+/g,""),o=i.replace(/\&+/g,""),d=o.replace(/\-/g,"");return d}var graph,levels=["Entry-Level","Mid-Level","Advanced-Level"],jobsDataset,catsData,nodes,links,clicked=!1,clickedId,formatThousand=d3.format(",d"),pathwayW;queue().defer(d3.csv,"data/career_pathway_links_data.csv").defer(d3.csv,"data/career_pathway_jobs_data.csv").defer(d3.csv,"data/areas_subcategories_ksa.csv").await(ready);var causes,colors,margin,width,height,x,barSvg,barHeight=45;d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selection.prototype.moveToBack=function(){return this.each(function(){var t=this.parentNode.firstChild;t&&this.parentNode.insertBefore(this,t)})};